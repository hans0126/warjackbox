<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <div>
        <button onclick="changeDisplayMode(0)">Single</button>
        <button onclick="changeDisplayMode(1)">Double</button>
    </div>
    <div id="c"></div>
    <div>
        <button onclick='gb("disabled")'>Disabled</button>
        <button onclick='gb("enabled")'>Enabled</button>
    </div>
    <div>
        <button onclick='gb("C")'>C</button>
        <button onclick='gb("S")'>S</button>
        <button onclick='gb("M")'>M</button>
        <button onclick='gb("L")'>L</button>
        <button onclick='gb("R")'>R</button>
        <button onclick='gb("G")'>G</button>
        <button onclick='gb("I")'>I</button>
    </div>
    <div>
        <button onclick='resetTb()'>Reset</button>
        <label>
            <input type="checkbox" onchange="changeMode(this)" /> mirror mode
        </label>
    </div>
    <div>
        <label>
            <input type="checkbox" onchange="changeLRbind(this)" id="lrCheckbox" /> L/R bind
        </label>
        <br>
        <label>
            <input type="checkbox" onchange="changeMCbind(this)" id="mcCheckbox" /> M/C bind
        </label>
    </div>
    <div>
        <textarea id="inputCode" cols="30" rows="10"></textarea>
        <textarea id="inputCode2" cols="30" rows="10"></textarea>
    </div>
    <div>
        <button onclick='getData()'>get data</button>
        <button onclick='renderData()'>render data</button>
    </div>
    <script src="js/lib/pixi.js/bin/pixi.min.js"></script>
    <script src="js/lib/stats.js-master/build/stats.min.js"></script>
    <script src="js/warjack_box.js"></script>
    <script>
    var loader = PIXI.loader;

    loader.add("source/satellite.fnt");
    loader.add("source/crackhouse.fnt");
    loader.add("source/templar.fnt");
    // loader.once('complete', onAssetsLoaded);

    loader.load();

    var inputCode = document.getElementById('inputCode'),
        inputCode2 = document.getElementById('inputCode2'),
        lrCheckbox = document.getElementById('lrCheckbox'),
        mcCheckbox = document.getElementById('mcCheckbox');

    var inputGroup = [inputCode, inputCode2]

    var fakeData = [];

    fakeData.push([
        ["-", "-", "-", "-", "-", "-"],
        ["+", "+", "+", "+", "+", "+"],
        ["+", "+", "+", "+", "+", "+"],
        ["-", "-", "+", "-", "-", "-"],
        ["-", "-", "-", "-", "-", "-"],
        ["-", "-", "-", "-", "-", "-"]
    ])

    fakeData.push([
        ["-", "-", "-", "-", "-", "-"],
        ["+", "+", "+", "+", "+", "+"],
        ["+", "+", "+", "+", "+", "+"],
        ["-", "-", "+", "-", "-", "-"],
        ["-", "-", "-", "C", "-", "-"],
        ["-", "-", "-", "-", "-", "-"]
    ])


    for (var i = 0; i < fakeData.length; i++) {
        inputGroup[i].value = fakeData[i].join("\n");
    }


    var wj = new warjackBox();

    lrCheckbox.checked = wj.LRbind;
    mcCheckbox.checked = wj.MCbind;

    wj.tableData = fakeData;

    wj.init();

    function gb(b) {
        wj.getBrush(b);
    }

    function resetTb() {
        wj.resetTable();
    }

    function changeMode(element) {
        wj.mirrorMode = element.checked;
    }

    function getData() {
        var _data = wj.getDataArray();
        for (var i = 0; i < _data.length; i++) {
            inputGroup[i].value = _data[i].join("\n");
        }
    }

    function renderData() {
        var _data = [];

        for (var i = 0; i < inputGroup.length; i++) {
            var _tempArr;
            var _combineArr = [];
            if (inputGroup[i].value != '') {
                _tempArr = inputGroup[i].value.split("\n");
                // _tempArr = _tempArr.split(",");

                for (var j = 0; j < _tempArr.length; j++) {
                    _combineArr.push(_tempArr[j].split(","));
                }

                _data.push(_combineArr);
            }
        }
    
        
        wj.changeDataRender(_data);
    }

    function changeDisplayMode(_mode) {
        wj.changeMode(_mode, function() {
            lrCheckbox.checked = wj.LRbind;
            mcCheckbox.checked = wj.MCbind;
        });
    }

    function changeLRbind(element) {
        wj.LRbind = element.checked;
    }

    function changeMCbind(element) {
        wj.MCbind = element.checked;
    }
    </script>
</body>

</html>
